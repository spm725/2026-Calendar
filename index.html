<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custard Calendar</title>

    <!-- External Styles -->
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

    <!-- NOTE:
         We removed the extra html/body/container overrides that forced 100% height
         and inner scrolling. styles.css now controls layout. -->
</head>
<body>
    <div class="container">
        <h1>Custard Calendar</h1>
        <div id="featured-flavor" class="featured-flavor"></div>

        <div class="calendar-navigation">
            <button id="prev-button" type="button">Previous</button>
            <div id="month-display"></div>
            <button id="next-button" type="button">Next</button>
        </div>

        <div id="calendar-container"></div>

        <!-- Padding at the bottom (class is defined in styles.css) -->
        <div class="bottom-padding"></div>
    </div>

    <!-- Calendar logic -->
    <script src="flavor-calendar.js"></script>

    <!-- Auto-height + responsive labels -->
    <script>
        (function () {
            // --------- 1. Send height to parent ----------
            function sendIframeHeight() {
                // Use the tallest of body / documentElement
                var height = Math.max(
                    document.body.scrollHeight,
                    document.documentElement.scrollHeight
                );

                window.parent.postMessage({
                    type: 'setIframeHeight',  // Parent will listen for this
                    height: height
                }, '*');
            }

            // On full load
            window.addEventListener('load', function () {
                sendIframeHeight();
                // Send again after a delay in case fonts/images load later
                setTimeout(sendIframeHeight, 500);
            });

            // On resize (rotation, viewport changes)
            window.addEventListener('resize', sendIframeHeight);

            // Observe DOM changes (e.g., when month changes)
            var observer = new MutationObserver(function () {
                sendIframeHeight();
            });

            observer.observe(document.body, {
                childList: true,
                subtree: true,
                attributes: true
            });

            // --------- 2. Button label responsiveness ----------
            function adjustButtonLabels() {
                var prevButton = document.getElementById('prev-button');
                var nextButton = document.getElementById('next-button');

                if (!prevButton || !nextButton) return;

                if (window.innerWidth < 768) {
                    prevButton.textContent = 'Prev';
                    nextButton.textContent = 'Next';
                } else {
                    prevButton.textContent = 'Previous';
                    nextButton.textContent = 'Next';
                }
            }

            window.addEventListener('resize', adjustButtonLabels);

            document.addEventListener('DOMContentLoaded', function () {
                adjustButtonLabels();
            });

            // NOTE:
            // We removed event.preventDefault() on the buttons.
            // These are simple <button type="button"> elements,
            // so they don't cause navigation/scrolling by default.
        })();
    </script>
</body>
</html>
